% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/run_workflows.R
\name{run_sensitivity}
\alias{run_sensitivity}
\title{Run multiple iSDM workflow: run sensitivity analysis using custom dataset combinations}
\usage{
run_sensitivity(
  spDat0,
  combinations,
  covariates_i,
  covariates_t,
  covariates_it,
  inclDet = FALSE,
  inclPhenology = FALSE,
  nburnin,
  niter,
  plot_outputs,
  save_filepath,
  version
)
}
\arguments{
\item{spDat0}{A named list of all available species observation datasets.}

\item{combinations}{A list of character vectors. Each element is a vector of dataset names to be used together in a model.}

\item{covariates_i}{Character vector of site-level covariates to include in the state model.}

\item{covariates_t}{Character vector of year-level covariates to include in the state model.}

\item{covariates_it}{Character vector of site-year covariates to include in the state model.}

\item{inclDet}{Logical. Whether to include detection covariates in the observation model. Defaults to \code{FALSE}.}

\item{inclPhenology}{Logical. Whether to include a phenology curve in the detection model. Defaults to \code{FALSE}.}

\item{nburnin}{Integer. Number of burn-in iterations for MCMC.}

\item{niter}{Integer. Total number of MCMC iterations.}

\item{plot_outputs}{Logical. Whether to generate and display plots during the workflow.}

\item{save_filepath}{String. Path prefix (including trailing slash if needed) for saving partial and final result files.}

\item{version}{Character string to append to output filenames (e.g., \code{"v1"} or \code{"2025-06-05"}).}
}
\value{
A list containing:
\describe{
\item{params}{A data frame of posterior parameter estimates across all models.}
\item{waic}{A data frame of WAIC values across all models.}
}
}
\description{
Executes a parameter sensitivity analysis by running multiple integrated species distribution models (iSDMs), each with a different combination of input datasets. The function loops through combinations, fits models using \code{run_model_workflow()}, collects parameter estimates and WAIC, and saves intermediate and final results to file.
}
\details{
For each combination of datasets, this function:
\itemize{
\item Subsets the datasets,
\item Runs the full model via \code{run_model_workflow()},
\item Tags the output with a model number and dataset combination name,
\item Saves intermediate \code{.rds} files for parameter and WAIC results,
\item Saves final combined outputs once all models have run.
}

Models that fail to run (e.g., due to convergence issues) are skipped and logged with a warning.
}
\examples{
\dontrun{
combs <- list(c("narrs", "arcarg"), c("narrs", "bto"))
results <- run_sensitivity(
  spDat0 = species_data_list,
  combinations = combs,
  covariates_i = c("elevationcs", "woodlandcs"),
  covariates_t = c("tas_MATcs"),
  covariates_it = NULL,
  inclDet = TRUE,
  inclPhenology = TRUE,
  nburnin = 3000,
  niter = 5000,
  plot_outputs = FALSE,
  save_filepath = "outputs/",
  version = "v1"
)
}

}
